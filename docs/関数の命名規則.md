# 関数の命名規則

関数をデータ変換（入力から出力への変換）として捉える
結果や変換内容を表す名前
名前に動詞を使わずに返すデータの性質を表現する

## 1. 純粋関数

### 1.1 「変換」の名前

- `normalize_email(s: str) -> str`
- `parse_order_id(text: str) -> Result[OrderId, Error]`
- `to_slug(title: str) -> str`

### 1.2 「取り出し」の名前（クエリ）

**名詞（または名詞句）**で「返すもの」を言う

- totalPrice(Cart): -> Money
- age(Person): -> Int
- length([a, b, c]): -> Int

### 1.3 「判定」の名前（Boolを返す）

- isEmpty
- isValid
- hasPermission

### 1.4 コレクション変換の定番語彙

mapX は避け、何をしてるかを出す：

- sanitizeEmails
- redactSecrets

filterX も同様：

- activeUsers
- eligibleOrders
- groupByX
- indexByX
- dedupeByX
- sortByX

## 2. 副作用あり関数（IO・状態変更）の命名パターン

### 2.1 「効果」を動詞で表す

- fetchUser
- loadConfig
- saveReport
- sendEmail
- logInfo
- notifySlack
- writeFile

例:

- `load_config(path: Path) -> Config`
- `save_report(path: Path, report: Report) -> None`

### 2.2 “破壊的変更”は名前で事故を防ぐ（重要）

Pythonはミュータブルが多いので特に効く

sort_in_place
update_cache
mutate_*
apply_*

可能なら「非破壊」と対で用意

sorted_users(users)（新しい値） vs sort_users_in_place(users)（破壊的）

Haskellは原則不変だが、IORef/STなどを触る関数は動詞が自然

modifyUserCache :: ... -> IO ()

### 2.3 危険・例外・部分関数は明示

Haskell慣習

unsafe*（安全性が破れる）

*Ex / *May / *Maybe（コミュニティやライブラリの慣例に合わせる）

head みたいな部分関数は避け、uncons や listToMaybe など安全版を使う（命名にも反映）

Python慣習（例）

- *_unsafe
- *_or_raise
- *_or_none
- try_*

- get_user_or_raise(user_id)`
- `try_parse_int(text) -> Optional[int]`
  
## 3. “FPっぽさ”が出る命名のコツ

### 3.1 名付けの順序（おすすめ）

ドメイン語（注文、請求、認可、在庫…）
返すもの / 変換結果
副作用の有無（必要なら）
失敗可能性（Either/Result/Optional など）
粒度（By/With/For で条件を足す）

例

eligibleOrdersForInvoice / eligible_orders_for_invoice
calculateShippingFee（純粋）
fetchShippingRate（外部I/O）

### 3.2 “手続型っぽい”名前をFP寄りに直す例

processOrders（曖昧）
→ validatedOrders（結果名詞） or validateOrders（変換動詞）
handleUser（曖昧）
→ normalizeUserInput / authorizeUser / persistUser
doCalculation
→ totalTax / calculateTax（どちらかに決める）

## 命名テンプレ（すぐ使える型）

純粋関数

toX / fromX
parseX / formatX
normalizeX / canonicalizeX
validateX（結果型は Either Error X などが自然）
xOf / xFor / xBy（抽出・集約）
isX / hasX / canX

副作用あり

loadX / saveX
fetchX / sendX
readX / writeX
logX / notifyX
updateX / applyX / *_in_place

失敗・危険

tryX（失敗を値で返す）
xOrRaise（例外を投げる）
unsafeX（安全性を破る）
